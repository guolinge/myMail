{"version":3,"sources":["pages/mail.less","pages/mail.js"],"names":["module","exports","nowTimeStamp","Date","now","App","props","state","date","time","textareValue","title","subtitle","mailUrl","letterCount","bind","sendMail","e","length","Toast","info","this","setState","myHeaders","Headers","append","request","Request","method","mode","body","JSON","stringify","headers","fetch","then","response","json","result","msg","catch","err","getFieldProps","form","className","style","backgroundColor","extra","value","onChange","Item","arrow","minuteStep","use12Hours","width","height","clear","placeholder","ref","el","autoFocusInst","initialValue","rows","count","focus","display","justifyContent","alignItems","marginTop","type","inline","onClick","React","Component","withRouter","createForm"],"mappings":"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","file":"static/js/4.d1c8e7fb.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/mail.fabfbc2d.less\";","import React from 'react'\nimport { withRouter } from 'react-router-dom';\nimport './mail.less'\nimport { DatePicker, List, TextareaItem, Toast, InputItem, Button, WhiteSpace } from 'antd-mobile';\nimport { createForm } from 'rc-form';\nimport 'antd-mobile/lib/date-picker/style/css';\nimport 'antd-mobile/lib/list/style/css';\nimport 'antd-mobile/lib/textarea-item/style/css';\nimport 'antd-mobile/lib/toast/style/css';\nimport 'antd-mobile/lib/input-item/style/css';\nimport 'antd-mobile/lib/button/style/css';\nimport 'antd-mobile/lib/white-space/style/css';\n\n\n\nconst testUrl = 'http://localhost:8081/mail/sendMail'\nconst productionUrl = 'http://111.229.217.134:8081/mail/sendMail'\nconst nowTimeStamp = Date.now();\nconst now = new Date(nowTimeStamp);\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      date: now,\n      time: now,\n      textareValue: '',\n      title: '',\n      subtitle: '',\n      mailUrl: ''\n    }\n    this.letterCount = this.letterCount.bind(this);\n    this.sendMail = this.sendMail.bind(this);\n  }\n  letterCount (e) {\n    if (e.length >= 1000) {\n      Toast.info('描述内容字符数需在1000字以内')\n    }\n    this.setState({ textareValue: e })\n  }\n\n  sendMail () {\n    if (!this.state.mailUrl) {\n      Toast.info('请输入收件邮箱')\n      return\n    }\n    if (!this.state.textareValue) {\n      Toast.info('请输入正文内容')\n      return\n    }\n    let myHeaders = new Headers();\n    myHeaders.append('Content-Type', 'application/json');\n    let request = new Request(productionUrl, {\n      method: 'POST', \n      mode: 'cors',\n      body:JSON.stringify(this.state),\n      headers:myHeaders\n    });\n    fetch(request)\n      .then(response => response.json())\n      .then(result =>{\n        Toast.info(result.msg)\n      })\n      .catch(err => {\n        Toast.info('请求失败')\n      })\n  }\n\n  componentDidMount() {\n\n  }\n\n  render () {\n    const { getFieldProps } = this.props.form;\n    return (\n      <div>\n      <List className=\"date-picker-list\" style={{ backgroundColor: 'white' }}>\n        <DatePicker\n          mode=\"date\"\n          title=\"Select Date\"\n          extra=\"Optional\"\n          value={this.state.date}\n          onChange={date => this.setState({ date })}\n        >\n          <List.Item arrow=\"horizontal\">选择日期</List.Item>\n        </DatePicker>\n\n        <DatePicker\n          mode=\"time\"\n          minuteStep={2}\n          use12Hours\n          value={this.state.time}\n          onChange={time => this.setState({ time })}\n        >\n          <List.Item arrow=\"horizontal\">选择时间</List.Item>\n        </DatePicker>\n        <div style={{ width: '100%', height: '20px'}}></div>\n        <InputItem\n          {...getFieldProps('autofocus')}\n          clear\n          placeholder=\"你家地址...\"\n          value={this.state.mailUrl}\n          ref={el => this.autoFocusInst = el}\n          onChange={mailUrl => this.setState({ mailUrl })}\n        >邮箱地址</InputItem>\n        <InputItem\n          {...getFieldProps('autofocus')}\n          clear\n          placeholder=\"简单的标题...\"\n          value={this.state.title}\n          ref={el => this.autoFocusInst = el}\n          onChange={title => this.setState({ title })}\n        >邮件标题</InputItem>\n        <InputItem\n          {...getFieldProps('autofocus')}\n          clear\n          placeholder=\"输入主题...\"\n          value={this.state.subtitle}\n          ref={el => this.autoFocusInst = el}\n          onChange={subtitle => this.setState({ subtitle })}\n        >邮件主题</InputItem>\n        <div style={{ width: '100%', height: '20px'}}></div>\n        <List.Item >输入正文内容</List.Item>\n        <TextareaItem\n            {...getFieldProps('count', {\n              initialValue: '',\n            })}\n            value={this.state.textareValue || ''}\n            rows={10}\n            count={1000}\n            focus=\"true\"\n            onChange={this.letterCount}\n            placeholder=\"从这里输入正文内容...\"\n          />\n      </List>\n      <div style={{ \n        width: '100%',\n        display: 'flex',\n        justifyContent: 'center',\n        alignItems: 'center',\n        marginTop: '20px'\n       }}>\n      <Button type=\"primary\" inline style={{ width: '180px' }} onClick={this.sendMail}>提交</Button>\n      </div>\n      <div style={{ width: '100%', height: '50px'}}></div>\n      </div>\n    )\n  }\n}\n\nexport default withRouter(createForm()(App))\n"],"sourceRoot":""}